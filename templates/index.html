<!doctype html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Prediksi Kalori Terbakar Berdasarkan Durasi Latihan üèã‚Äç‚ôÄ</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      :root {
        --blue-dark: #0a1a45;
        --blue-mid: #1e3c72;
        --blue-light: #5b8def;
        --blue-soft: #e8f0ff;
        --white-soft: #f7faff;
      }

      body {
        background: linear-gradient(180deg, var(--white-soft), #ffffff 50%);
        color: #0b1220;
        font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
        padding-top: 40px;
      }

      .card-hero {
        border: none;
        border-radius: 18px;
        box-shadow: 0 8px 30px rgba(0,0,0,0.07);
        background: linear-gradient(135deg, var(--white-soft), #ffffff);
      }

      .header-title {
        color: var(--blue-dark);
        font-weight: 700;
      }

      .btn-primary {
        background: linear-gradient(90deg, var(--blue-dark), var(--blue-mid));
        border: none;
        box-shadow: 0 6px 18px rgba(0,0,0,0.08);
        color: #fff;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .btn-primary:hover {
        background: linear-gradient(90deg, var(--blue-mid), var(--blue-light));
        transform: translateY(-2px);
      }

      .btn-secondary {
        background-color: var(--blue-soft);
        color: var(--blue-dark);
        border: none;
        font-weight: 500;
      }

      .btn-secondary:hover {
        background-color: #d6e4ff;
        color: var(--blue-mid);
      }

      .metric-box {
        background: linear-gradient(180deg, rgba(91,141,239,0.08), rgba(255,255,255,0.6));
        border-radius: 10px;
        padding: 10px 14px;
      }

      .small-muted {
        color: #6c7a99;
        font-size: 0.9rem;
      }

      .metric-value {
        color: var(--blue-dark);
        font-weight: 600;
      }

      /* üéØ Card hasil prediksi (gradasi biru tua ke biru muda lembut) */
      .result-card {
        background: linear-gradient(135deg, var(--blue-dark), var(--blue-mid));
        color: #ffffff;
        border-radius: 16px;
        padding: 20px 24px;
        box-shadow: 0 8px 24px rgba(14, 30, 80, 0.25);
        animation: fadeIn 0.6s ease-in-out;
        text-align: center;
        transition: all 0.3s ease;
      }

      .result-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 28px rgba(14, 30, 80, 0.35);
      }

      .result-card .title {
        font-weight: 500;
        color: #d7e3ff;
        margin-bottom: 6px;
        font-size: 1rem;
      }

      .result-card .value {
        font-weight: 700;
        color: #ffffff;
        font-size: 1.6rem;
        letter-spacing: 0.5px;
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      /* üé® Galeri grafik */
      .graph-card {
        background: #ffffff;
        border: none;
        border-radius: 18px;
        overflow: hidden;
        box-shadow: 0 8px 20px rgba(0,0,0,0.06);
        transition: all 0.3s ease;
        position: relative;
      }

      .graph-card:hover {
        transform: translateY(-6px) scale(1.02);
        box-shadow: 0 12px 26px rgba(14, 30, 80, 0.18);
      }

      .graph-img {
        width: 100%;
        height: auto;
        border-radius: 12px;
        transition: all 0.3s ease;
      }

      .graph-card:hover .graph-img {
        filter: brightness(1.07);
      }

      .graph-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to top, rgba(14,30,80,0.85), rgba(91,141,239,0.3));
        color: #ffffff;
        padding: 12px 10px;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .graph-card:hover .graph-overlay {
        opacity: 1;
      }

      .graph-title {
        font-weight: 600;
        font-size: 1rem;
        text-shadow: 0 2px 6px rgba(0,0,0,0.4);
      }

      /* üéØ Pesan error */
      .alert-custom {
        background: linear-gradient(135deg, var(--blue-dark), var(--blue-mid));
        color: white;
        border-radius: 12px;
        font-weight: 500;
        text-align: center;
        padding: 16px;
        box-shadow: 0 6px 20px rgba(0,0,80,0.2);
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
          <div class="card card-hero p-4">
            <div class="card-body">
              <div class="d-flex align-items-center mb-3">
                <div class="me-3">
                  <div style="width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,var(--blue-dark),var(--blue-light));display:flex;align-items:center;justify-content:center;color:white;font-weight:700;">
                    üî•
                  </div>
                </div>
                <div>
                  <h4 class="mb-0 header-title">Prediksi Kalori Terbakar Berdasarkan Durasi Latihan üèã‚Äç‚ôÄ</h4>
                  <div class="small-muted">Masukkan durasi latihan (jam), lalu klik "Prediksi Kalori".</div>
                </div>
              </div>

              <!-- Form -->
              <form method="POST" action="{{ url_for('predict') }}" class="mb-3" id="predictForm">
                <div class="row g-2 align-items-end">
                  <div class="col-md-6">
                    <label for="duration" class="form-label small-muted">Durasi latihan (jam)</label>
                    <input id="duration" name="duration" type="text" class="form-control form-control-lg" placeholder="Contoh: 30" value="{{ duration_input|default('') }}">
                  </div>
                  <div class="col-md-3 d-grid">
                    <button type="submit" class="btn btn-primary btn-lg">Prediksi</button>
                  </div>
                  <div class="col-md-3 d-grid">
                    <button type="button" class="btn btn-secondary btn-lg" id="resetBtn">Reset</button>
                  </div>
                </div>
              </form>

              {% if error %}
              <div class="alert-custom" role="alert">
                ‚ö†Ô∏è Terjadi kesalahan: pastikan Anda mengisi durasi latihan dengan angka yang valid.
              </div>
              {% endif %}

              <!-- Card Hasil Prediksi -->
              {% if prediction %}
              <div class="result-card mb-4">
                <div class="title">Hasil Prediksi Kalori Terbakar</div>
                <div class="value">{{ prediction }}</div>
              </div>
              {% endif %}

              <!-- Metrik -->
              <div class="row mb-4">
                <div class="col-6">
                  <div class="metric-box text-center">
                    <div class="small-muted">R¬≤ Score</div>
                    <div class="h5 mb-0 metric-value">{{ r2|default('N/A') }}</div>
                  </div>
                </div>
                <div class="col-6">
                  <div class="metric-box text-center">
                    <div class="small-muted">RMSE</div>
                    <div class="h5 mb-0 metric-value">{{ rmse|default('N/A') }}</div>
                  </div>
                </div>
              </div>

              <!-- üìä Galeri Grafik -->
              <div>
                <div class="small-muted mb-3 text-center">Visualisasi Data & Diagnosa Model</div>
                <div class="row g-4">
                  {% set grafik_list = [
                      'scatterplot.png',
                      'distribusi_durasi.png',
                      'distribusi_kalori.png',
                      'grafik_prediksi.png',
                      'heatmap_korelasi.png',
                      'residualplot.png'
                  ] %}
                  {% for grafik in grafik_list %}
                  <div class="col-md-4 col-sm-6">
                    <div class="graph-card h-100">
                      <img src="{{ url_for('static', filename=grafik) }}" alt="Grafik {{ grafik }}" class="graph-img">
                      <div class="graph-overlay text-center">
                        <div class="graph-title">{{ grafik.split('.')[0].replace('_', ' ').title() }}</div>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Tombol Reset
      document.getElementById('resetBtn').addEventListener('click', function() {
        document.getElementById('duration').value = '';
        document.getElementById('predictForm').submit();
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
